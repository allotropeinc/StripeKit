// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation
import Get
import URLQueryEncoder

extension Paths.Invoices.WithInvoice {
    public var send: Send {
        Send(path: path + "/send")
    }

    public struct Send {
        /// Path: `/v1/invoices/{invoice}/send`
        public let path: String

        /// <p>Stripe will automatically send invoices to customers according to your <a href="https://dashboard.stripe.com/account/billing/automatic">subscriptions settings</a>. However, if youâ€™d like to manually send an invoice to your customer out of the normal schedule, you can do so. When sending invoices that have already been paid, there will be no reference to the payment in the email.</p>
        /// 
        /// <p>Requests made in test-mode result in no emails being sent, despite sending an <code>invoice.sent</code> event.</p>
        public func post(_ body: PostRequest? = nil) -> Request<StripeKit.Invoice> {
            Request(method: "POST", url: path, body: body.map(URLQueryEncoder.encode)?.percentEncodedQuery, id: "PostInvoicesInvoiceSend")
        }

        public struct PostRequest: Encodable {
            /// Specifies which fields in the response should be expanded.
            public var expand: [String]?

            public init(expand: [String]? = nil) {
                self.expand = expand
            }

            public var asQuery: [(String, String?)] {
                let encoder = URLQueryEncoder()
                encoder.encode(expand, forKey: "expand")
                return encoder.items
            }
        }
    }
}
