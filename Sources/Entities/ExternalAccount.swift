// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation

/// Polymorphic
public struct ExternalAccount: Codable {
    /// These bank accounts are payment methods on `Customer` objects.
    /// 
    /// On the other hand [External Accounts](https://stripe.com/docs/api#external_accounts) are transfer
    /// destinations on `Account` objects for [Custom accounts](https://stripe.com/docs/connect/custom-accounts).
    /// They can be bank accounts or debit cards as well, and are documented in the links above.
    /// 
    /// Related guide: [Bank Debits and Transfers](https://stripe.com/docs/payments/bank-debits-transfers).
    public var bankAccount: BankAccount?
    /// You can store multiple cards on a customer in order to charge the customer
    /// later. You can also store multiple debit cards on a recipient in order to
    /// transfer to those cards later.
    /// 
    /// Related guide: [Card Payments with Sources](https://stripe.com/docs/sources/cards).
    public var card: Card?

    public init(bankAccount: BankAccount? = nil, card: Card? = nil) {
        self.bankAccount = bankAccount
        self.card = card
    }

    public init(from decoder: Decoder) throws {
        let container = try decoder.singleValueContainer()
        self.bankAccount = try? container.decode(BankAccount.self)
        self.card = try? container.decode(Card.self)
    }

    public func encode(to encoder: Encoder) throws {
        var container = encoder.singleValueContainer()
        if let value = bankAccount { try container.encode(value) }
        if let value = card { try container.encode(value) }
    }
}
