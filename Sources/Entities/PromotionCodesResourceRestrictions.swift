// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation

public struct PromotionCodesResourceRestrictions: Codable {
    /// Promotion code restrictions defined in each available currency option. Each key must be a three-letter [ISO currency code](https://www.iso.org/iso-4217-currency-codes.html) and a [supported currency](https://stripe.com/docs/currencies).
    public var currencyOptions: [String: PromotionCodeCurrencyOption]?
    /// A Boolean indicating if the Promotion Code should only be redeemed for Customers without any successful payments or invoices
    public var isFirstTimeTransaction: Bool
    /// Minimum amount required to redeem this Promotion Code into a Coupon (e.g., a purchase must be $100 or more to work).
    public var minimumAmount: Int?
    /// Three-letter [ISO code](https://stripe.com/docs/currencies) for minimum_amount
    public var minimumAmountCurrency: String?

    public init(currencyOptions: [String: PromotionCodeCurrencyOption]? = nil, isFirstTimeTransaction: Bool, minimumAmount: Int? = nil, minimumAmountCurrency: String? = nil) {
        self.currencyOptions = currencyOptions
        self.isFirstTimeTransaction = isFirstTimeTransaction
        self.minimumAmount = minimumAmount
        self.minimumAmountCurrency = minimumAmountCurrency
    }

    public init(from decoder: Decoder) throws {
        let values = try decoder.container(keyedBy: StringCodingKey.self)
        self.currencyOptions = try values.decodeIfPresent([String: PromotionCodeCurrencyOption].self, forKey: "currency_options")
        self.isFirstTimeTransaction = try values.decode(Bool.self, forKey: "first_time_transaction")
        self.minimumAmount = try values.decodeIfPresent(Int.self, forKey: "minimum_amount")
        self.minimumAmountCurrency = try values.decodeIfPresent(String.self, forKey: "minimum_amount_currency")
    }

    public func encode(to encoder: Encoder) throws {
        var values = encoder.container(keyedBy: StringCodingKey.self)
        try values.encodeIfPresent(currencyOptions, forKey: "currency_options")
        try values.encode(isFirstTimeTransaction, forKey: "first_time_transaction")
        try values.encodeIfPresent(minimumAmount, forKey: "minimum_amount")
        try values.encodeIfPresent(minimumAmountCurrency, forKey: "minimum_amount_currency")
    }
}
